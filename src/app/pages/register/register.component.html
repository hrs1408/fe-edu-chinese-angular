<div class="bg-header"></div>

<div class="register-container">
  <div class="register-header">
    <h1>Đăng ký khóa học</h1>
    <p>Vui lòng điền đầy đủ thông tin để đăng ký khóa học</p>
  </div>

  <!-- Loading state -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Đang tải thông tin khóa học...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error" class="error-state">
    <i class="fas fa-exclamation-circle"></i>
    <p>{{ error }}</p>
    <button (click)="loadCourseInfo()" class="retry-button">
      <i class="fas fa-redo"></i> Thử lại
    </button>
  </div>

  <!-- Course Info -->
  <div class="course-info" *ngIf="course && !isLoading && !error">
    <h2>{{ course.course_name }}</h2>
    <p class="description">{{ course.description }}</p>
    <div class="price">Học phí: {{ formatPrice(course.price) }}</div>
  </div>

  <!-- Register Form -->
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form" *ngIf="!isLoading && !error">
    <div class="form-group">
      <label for="fullName">Họ và tên <span class="required">*</span></label>
      <input
        type="text"
        id="fullName"
        formControlName="fullName"
        [class.invalid]="isFieldInvalid('fullName')"
      >
      <div class="error-message" *ngIf="isFieldInvalid('fullName')">
        Vui lòng nhập họ và tên
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email <span class="required">*</span></label>
      <input
        type="email"
        id="email"
        formControlName="email"
        [class.invalid]="isFieldInvalid('email')"
      >
      <div class="error-message" *ngIf="isFieldInvalid('email')">
        Vui lòng nhập email hợp lệ
      </div>
    </div>

    <div class="form-group">
      <label for="phone">Số điện thoại <span class="required">*</span></label>
      <input
        type="tel"
        id="phone"
        formControlName="phone"
        [class.invalid]="isFieldInvalid('phone')"
      >
      <div class="error-message" *ngIf="isFieldInvalid('phone')">
        Vui lòng nhập số điện thoại hợp lệ
      </div>
    </div>

    <div class="form-group">
      <label for="note">Ghi chú</label>
      <textarea
        id="note"
        formControlName="note"
        rows="4"
      ></textarea>
    </div>

    <div class="form-actions">
      <button type="button" class="cancel-button" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        Quay lại
      </button>
      <button type="submit" class="submit-button" [disabled]="registerForm.invalid || isSubmitting">
        <i class="fas fa-paper-plane"></i>
        {{ isSubmitting ? 'Đang gửi...' : 'Gửi đăng ký' }}
      </button>
    </div>
  </form>
</div>
